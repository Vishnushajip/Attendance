{
    "sourceFile": "lib/Screens/Attendance.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 38,
            "patches": [
                {
                    "date": 1741784886623,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1741784894532,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,7 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n+\r\n class AttendanceScreen extends ConsumerWidget {\r\n   @override\r\n   Widget build(BuildContext context, WidgetRef ref) {\r\n     final userEmail = ref.watch(userProvider)?.email ?? \"Unknown User\";\r\n"
                },
                {
                    "date": 1741784901077,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,9 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n \r\n+import '../Providers/Providers.dart';\r\n+\r\n class AttendanceScreen extends ConsumerWidget {\r\n   @override\r\n   Widget build(BuildContext context, WidgetRef ref) {\r\n     final userEmail = ref.watch(userProvider)?.email ?? \"Unknown User\";\r\n"
                },
                {
                    "date": 1741784911442,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n \r\n import '../Providers/Providers.dart';\r\n+final attendanceViewModelProvider = Provider((ref) => AttendanceViewModel(FirebaseFirestore.instance));\r\n \r\n class AttendanceScreen extends ConsumerWidget {\r\n   @override\r\n   Widget build(BuildContext context, WidgetRef ref) {\r\n"
                },
                {
                    "date": 1741784944258,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,9 @@\n+import 'package:cloud_firestore/cloud_firestore.dart';\r\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n \r\n+import '../Models/AttendanceModel.dart';\r\n import '../Providers/Providers.dart';\r\n final attendanceViewModelProvider = Provider((ref) => AttendanceViewModel(FirebaseFirestore.instance));\r\n \r\n class AttendanceScreen extends ConsumerWidget {\r\n"
                },
                {
                    "date": 1741795142623,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n \r\n import '../Models/AttendanceModel.dart';\r\n+import '../Models/LoginModel.dart';\r\n import '../Providers/Providers.dart';\r\n final attendanceViewModelProvider = Provider((ref) => AttendanceViewModel(FirebaseFirestore.instance));\r\n \r\n class AttendanceScreen extends ConsumerWidget {\r\n"
                },
                {
                    "date": 1741795148914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,9 @@\n import 'package:cloud_firestore/cloud_firestore.dart';\r\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n-\r\n import '../Models/AttendanceModel.dart';\r\n import '../Models/LoginModel.dart';\r\n-import '../Providers/Providers.dart';\r\n final attendanceViewModelProvider = Provider((ref) => AttendanceViewModel(FirebaseFirestore.instance));\r\n \r\n class AttendanceScreen extends ConsumerWidget {\r\n   @override\r\n"
                },
                {
                    "date": 1741795203188,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n \r\n class AttendanceScreen extends ConsumerWidget {\r\n   @override\r\n   Widget build(BuildContext context, WidgetRef ref) {\r\n-    final userEmail = ref.watch(userProvider)?.email ?? \"Unknown User\";\r\n+    final userEmail = ref.watch(userProvider) ?? \"Unknown User\";\r\n     final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n     String currentDate = DateTime.now().toLocal().toString().split(' ')[0];\r\n \r\n     return Scaffold(\r\n"
                },
                {
                    "date": 1741796504762,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,16 @@\n           mainAxisAlignment: MainAxisAlignment.center,\r\n           children: [\r\n             Text(\"Date: $currentDate\", style: TextStyle(fontSize: 20)),\r\n             SizedBox(height: 20),\r\n-            ElevatedButton(\r\n+            ElevatedButton(style: ElevatedButton.styleFrom(\r\n+                    backgroundColor: Colors.blue,\r\n+                    shape: RoundedRectangleBorder(\r\n+                      borderRadius: BorderRadius.circular(8),\r\n+                    ),\r\n+                    elevation: 5,\r\n+                    padding: EdgeInsets.symmetric(vertical: 12, horizontal: 12),\r\n+                  ),\r\n               onPressed: () async {\r\n                 await attendanceViewModel.markAttendance(userEmail);\r\n                 ScaffoldMessenger.of(context).showSnackBar(\r\n                   SnackBar(content: Text(\"Attendance Marked!\")),\r\n"
                },
                {
                    "date": 1741796515814,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,11 +2,15 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n import '../Models/AttendanceModel.dart';\r\n import '../Models/LoginModel.dart';\r\n-final attendanceViewModelProvider = Provider((ref) => AttendanceViewModel(FirebaseFirestore.instance));\r\n \r\n+final attendanceViewModelProvider =\r\n+    Provider((ref) => AttendanceViewModel(FirebaseFirestore.instance));\r\n+\r\n class AttendanceScreen extends ConsumerWidget {\r\n+  const AttendanceScreen({super.key});\r\n+\r\n   @override\r\n   Widget build(BuildContext context, WidgetRef ref) {\r\n     final userEmail = ref.watch(userProvider) ?? \"Unknown User\";\r\n     final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n@@ -19,23 +23,24 @@\n           mainAxisAlignment: MainAxisAlignment.center,\r\n           children: [\r\n             Text(\"Date: $currentDate\", style: TextStyle(fontSize: 20)),\r\n             SizedBox(height: 20),\r\n-            ElevatedButton(style: ElevatedButton.styleFrom(\r\n-                    backgroundColor: Colors.blue,\r\n-                    shape: RoundedRectangleBorder(\r\n-                      borderRadius: BorderRadius.circular(8),\r\n-                    ),\r\n-                    elevation: 5,\r\n-                    padding: EdgeInsets.symmetric(vertical: 12, horizontal: 12),\r\n-                  ),\r\n+            ElevatedButton(\r\n+              style: ElevatedButton.styleFrom(\r\n+                backgroundColor: Colors.blue,\r\n+                shape: RoundedRectangleBorder(\r\n+                  borderRadius: BorderRadius.circular(8),\r\n+                ),\r\n+                elevation: 5,\r\n+                padding: EdgeInsets.symmetric(vertical: 12, horizontal: 12),\r\n+              ),\r\n               onPressed: () async {\r\n                 await attendanceViewModel.markAttendance(userEmail);\r\n                 ScaffoldMessenger.of(context).showSnackBar(\r\n                   SnackBar(content: Text(\"Attendance Marked!\")),\r\n                 );\r\n               },\r\n-              child: Text(\"Mark Attendance\"),\r\n+              child: Text(\"Mark Attendance\",style: Google,),\r\n             ),\r\n           ],\r\n         ),\r\n       ),\r\n"
                },
                {
                    "date": 1741796521372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import 'package:cloud_firestore/cloud_firestore.dart';\r\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n+import 'package:google_fonts/google_fonts.dart';\r\n import '../Models/AttendanceModel.dart';\r\n import '../Models/LoginModel.dart';\r\n \r\n final attendanceViewModelProvider =\r\n@@ -38,9 +39,12 @@\n                 ScaffoldMessenger.of(context).showSnackBar(\r\n                   SnackBar(content: Text(\"Attendance Marked!\")),\r\n                 );\r\n               },\r\n-              child: Text(\"Mark Attendance\",style: Google,),\r\n+              child: Text(\r\n+                \"Mark Attendance\",\r\n+                style: GoogleFonts.poppins(),\r\n+              ),\r\n             ),\r\n           ],\r\n         ),\r\n       ),\r\n"
                },
                {
                    "date": 1741796530897,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,13 @@\n                 );\r\n               },\r\n               child: Text(\r\n                 \"Mark Attendance\",\r\n-                style: GoogleFonts.poppins(),\r\n+                style: GoogleFonts.poppins(\r\n+                  fontSize: 16,\r\n+                  fontWeight: FontWeight.w500,\r\n+                  color: Colors.white,\r\n+                ),\r\n               ),\r\n             ),\r\n           ],\r\n         ),\r\n"
                },
                {
                    "date": 1741796544859,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,11 +35,9 @@\n                 padding: EdgeInsets.symmetric(vertical: 12, horizontal: 12),\r\n               ),\r\n               onPressed: () async {\r\n                 await attendanceViewModel.markAttendance(userEmail);\r\n-                ScaffoldMessenger.of(context).showSnackBar(\r\n-                  SnackBar(content: Text(\"Attendance Marked!\")),\r\n-                );\r\n+                Flutter\r\n               },\r\n               child: Text(\r\n                 \"Mark Attendance\",\r\n                 style: GoogleFonts.poppins(\r\n"
                },
                {
                    "date": 1741796550886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import 'package:cloud_firestore/cloud_firestore.dart';\r\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n+import 'package:fluttertoast/fluttertoast.dart';\r\n import 'package:google_fonts/google_fonts.dart';\r\n import '../Models/AttendanceModel.dart';\r\n import '../Models/LoginModel.dart';\r\n \r\n@@ -35,9 +36,9 @@\n                 padding: EdgeInsets.symmetric(vertical: 12, horizontal: 12),\r\n               ),\r\n               onPressed: () async {\r\n                 await attendanceViewModel.markAttendance(userEmail);\r\n-                Flutter\r\n+                Fluttertoast.showToast(msg: )\r\n               },\r\n               child: Text(\r\n                 \"Mark Attendance\",\r\n                 style: GoogleFonts.poppins(\r\n"
                },
                {
                    "date": 1741796556309,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n                 padding: EdgeInsets.symmetric(vertical: 12, horizontal: 12),\r\n               ),\r\n               onPressed: () async {\r\n                 await attendanceViewModel.markAttendance(userEmail);\r\n-                Fluttertoast.showToast(msg: )\r\n+                Fluttertoast.showToast(msg: \"Attendance marked successfully!\");\r\n               },\r\n               child: Text(\r\n                 \"Mark Attendance\",\r\n                 style: GoogleFonts.poppins(\r\n"
                },
                {
                    "date": 1741796563769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n                 padding: EdgeInsets.symmetric(vertical: 12, horizontal: 12),\r\n               ),\r\n               onPressed: () async {\r\n                 await attendanceViewModel.markAttendance(userEmail);\r\n-                Fluttertoast.showToast(msg: \"Attendance marked successfully!\");\r\n+               \r\n               },\r\n               child: Text(\r\n                 \"Mark Attendance\",\r\n                 style: GoogleFonts.poppins(\r\n"
                },
                {
                    "date": 1741796707010,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n import 'package:cloud_firestore/cloud_firestore.dart';\r\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n-import 'package:fluttertoast/fluttertoast.dart';\r\n import 'package:google_fonts/google_fonts.dart';\r\n import '../Models/AttendanceModel.dart';\r\n import '../Models/LoginModel.dart';\r\n \r\n"
                },
                {
                    "date": 1741796939377,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n     final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n     String currentDate = DateTime.now().toLocal().toString().split(' ')[0];\r\n \r\n     return Scaffold(\r\n-      appBar: AppBar(title: Text(\"Attendance\")),\r\n+      appBar: AppBar(title: Text(\"Attendance\",Googl)),\r\n       body: Center(\r\n         child: Column(\r\n           mainAxisAlignment: MainAxisAlignment.center,\r\n           children: [\r\n"
                },
                {
                    "date": 1741796945311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n     final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n     String currentDate = DateTime.now().toLocal().toString().split(' ')[0];\r\n \r\n     return Scaffold(\r\n-      appBar: AppBar(title: Text(\"Attendance\",Googl)),\r\n+      appBar: AppBar(title: Text(\"Attendance\",style: ,)),\r\n       body: Center(\r\n         child: Column(\r\n           mainAxisAlignment: MainAxisAlignment.center,\r\n           children: [\r\n"
                },
                {
                    "date": 1741796952304,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n     final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n     String currentDate = DateTime.now().toLocal().toString().split(' ')[0];\r\n \r\n     return Scaffold(\r\n-      appBar: AppBar(title: Text(\"Attendance\",style: ,)),\r\n+      appBar: AppBar(title: Text(\"Attendance\",style: GoogleFonts.poppins,)),\r\n       body: Center(\r\n         child: Column(\r\n           mainAxisAlignment: MainAxisAlignment.center,\r\n           children: [\r\n"
                },
                {
                    "date": 1741796961066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,14 @@\n     final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n     String currentDate = DateTime.now().toLocal().toString().split(' ')[0];\r\n \r\n     return Scaffold(\r\n-      appBar: AppBar(title: Text(\"Attendance\",style: GoogleFonts.poppins,)),\r\n+      appBar: AppBar(\r\n+          centerTitle: true,\r\n+          title: Text(\r\n+            \"Attendance\",\r\n+            style: GoogleFonts.poppins(),\r\n+          )),\r\n       body: Center(\r\n         child: Column(\r\n           mainAxisAlignment: MainAxisAlignment.center,\r\n           children: [\r\n@@ -35,9 +40,8 @@\n                 padding: EdgeInsets.symmetric(vertical: 12, horizontal: 12),\r\n               ),\r\n               onPressed: () async {\r\n                 await attendanceViewModel.markAttendance(userEmail);\r\n-               \r\n               },\r\n               child: Text(\r\n                 \"Mark Attendance\",\r\n                 style: GoogleFonts.poppins(\r\n"
                },
                {
                    "date": 1741802713160,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,57 +1,112 @@\n import 'package:cloud_firestore/cloud_firestore.dart';\r\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n import 'package:google_fonts/google_fonts.dart';\r\n+import 'package:shared_preferences/shared_preferences.dart';\r\n+import 'package:intl/intl.dart';\r\n import '../Models/AttendanceModel.dart';\r\n import '../Models/LoginModel.dart';\r\n \r\n final attendanceViewModelProvider =\r\n     Provider((ref) => AttendanceViewModel(FirebaseFirestore.instance));\r\n \r\n-class AttendanceScreen extends ConsumerWidget {\r\n+class AttendanceScreen extends ConsumerStatefulWidget {\r\n   const AttendanceScreen({super.key});\r\n \r\n   @override\r\n-  Widget build(BuildContext context, WidgetRef ref) {\r\n-    final userEmail = ref.watch(userProvider) ?? \"Unknown User\";\r\n+  ConsumerState<AttendanceScreen> createState() => _AttendanceScreenState();\r\n+}\r\n+\r\n+class _AttendanceScreenState extends ConsumerState<AttendanceScreen> {\r\n+  String? attendanceStatus;\r\n+\r\n+  @override\r\n+  void initState() {\r\n+    super.initState();\r\n+    _loadAttendanceStatus();\r\n+  }\r\n+\r\n+  Future<void> _loadAttendanceStatus() async {\r\n+    SharedPreferences prefs = await SharedPreferences.getInstance();\r\n+    setState(() {\r\n+      attendanceStatus = prefs.getString('attendance_status') ?? 'Clock In';\r\n+    });\r\n+  }\r\n+\r\n+  Future<void> _toggleAttendance(String userEmail) async {\r\n+    SharedPreferences prefs = await SharedPreferences.getInstance();\r\n     final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n-    String currentDate = DateTime.now().toLocal().toString().split(' ')[0];\r\n+    String newStatus = attendanceStatus == 'Clock In' ? 'Clock Out' : 'Clock In';\r\n+    await attendanceViewModel.markAttendance(userEmail);\r\n+    await prefs.setString('attendance_status', newStatus);\r\n+    setState(() {\r\n+      attendanceStatus = newStatus;\r\n+    });\r\n+  }\r\n \r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    final userEmail = ref.watch(userProvider) ?? \"Unknown User\";\r\n+    String formattedDate = DateFormat('EEEE, MMM d').format(DateTime.now());\r\n+    String formattedTime = DateFormat('HH:mm').format(DateTime.now());\r\n+\r\n     return Scaffold(\r\n-      appBar: AppBar(\r\n-          centerTitle: true,\r\n-          title: Text(\r\n-            \"Attendance\",\r\n-            style: GoogleFonts.poppins(),\r\n-          )),\r\n+      backgroundColor: Colors.white,\r\n       body: Center(\r\n         child: Column(\r\n           mainAxisAlignment: MainAxisAlignment.center,\r\n           children: [\r\n-            Text(\"Date: $currentDate\", style: TextStyle(fontSize: 20)),\r\n-            SizedBox(height: 20),\r\n-            ElevatedButton(\r\n-              style: ElevatedButton.styleFrom(\r\n-                backgroundColor: Colors.blue,\r\n-                shape: RoundedRectangleBorder(\r\n-                  borderRadius: BorderRadius.circular(8),\r\n-                ),\r\n-                elevation: 5,\r\n-                padding: EdgeInsets.symmetric(vertical: 12, horizontal: 12),\r\n+            Text(\r\n+              formattedTime,\r\n+              style: GoogleFonts.poppins(\r\n+                fontSize: 40,\r\n+                fontWeight: FontWeight.bold,\r\n+                color: Colors.black,\r\n               ),\r\n-              onPressed: () async {\r\n-                await attendanceViewModel.markAttendance(userEmail);\r\n-              },\r\n-              child: Text(\r\n-                \"Mark Attendance\",\r\n-                style: GoogleFonts.poppins(\r\n-                  fontSize: 16,\r\n-                  fontWeight: FontWeight.w500,\r\n-                  color: Colors.white,\r\n+            ),\r\n+            Text(\r\n+              formattedDate,\r\n+              style: GoogleFonts.poppins(fontSize: 20, color: Colors.grey),\r\n+            ),\r\n+            const SizedBox(height: 40),\r\n+            GestureDetector(\r\n+              onTap: () => _toggleAttendance(userEmail),\r\n+              child: Container(\r\n+                width: 120,\r\n+                height: 120,\r\n+                decoration: BoxDecoration(\r\n+                  shape: BoxShape.circle,\r\n+                  gradient: const LinearGradient(\r\n+                    colors: [Colors.pink, Colors.purple],\r\n+                    begin: Alignment.topLeft,\r\n+                    end: Alignment.bottomRight,\r\n+                  ),\r\n+                  boxShadow: [\r\n+                    BoxShadow(\r\n+                      color: Colors.purple.withOpacity(0.5),\r\n+                      blurRadius: 10,\r\n+                      spreadRadius: 2,\r\n+                    )\r\n+                  ],\r\n                 ),\r\n+                child: Center(\r\n+                  child: Icon(\r\n+                    attendanceStatus == 'Clock In' ? Icons.login : Icons.logout,\r\n+                    size: 50,\r\n+                    color: Colors.white,\r\n+                  ),\r\n+                ),\r\n               ),\r\n             ),\r\n+            const SizedBox(height: 20),\r\n+            Text(\r\n+              attendanceStatus!,\r\n+              style: GoogleFonts.poppins(\r\n+                fontSize: 22,\r\n+                fontWeight: FontWeight.bold,\r\n+              ),\r\n+            ),\r\n           ],\r\n         ),\r\n       ),\r\n     );\r\n"
                },
                {
                    "date": 1741802747454,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,8 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n import 'package:google_fonts/google_fonts.dart';\r\n import 'package:shared_preferences/shared_preferences.dart';\r\n-import 'package:intl/intl.dart';\r\n import '../Models/AttendanceModel.dart';\r\n import '../Models/LoginModel.dart';\r\n \r\n final attendanceViewModelProvider =\r\n"
                },
                {
                    "date": 1741802764223,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n import 'package:google_fonts/google_fonts.dart';\r\n import 'package:shared_preferences/shared_preferences.dart';\r\n+import 'package:intl/intl.dart';\r\n import '../Models/AttendanceModel.dart';\r\n import '../Models/LoginModel.dart';\r\n \r\n final attendanceViewModelProvider =\r\n@@ -34,9 +35,10 @@\n \r\n   Future<void> _toggleAttendance(String userEmail) async {\r\n     SharedPreferences prefs = await SharedPreferences.getInstance();\r\n     final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n-    String newStatus = attendanceStatus == 'Clock In' ? 'Clock Out' : 'Clock In';\r\n+    String newStatus =\r\n+        attendanceStatus == 'Clock In' ? 'Clock Out' : 'Clock In';\r\n     await attendanceViewModel.markAttendance(userEmail);\r\n     await prefs.setString('attendance_status', newStatus);\r\n     setState(() {\r\n       attendanceStatus = newStatus;\r\n"
                },
                {
                    "date": 1741804090325,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,115 +1,64 @@\n-import 'package:cloud_firestore/cloud_firestore.dart';\r\n-import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n-import 'package:google_fonts/google_fonts.dart';\r\n import 'package:shared_preferences/shared_preferences.dart';\r\n+import 'package:cloud_firestore/cloud_firestore.dart';\r\n import 'package:intl/intl.dart';\r\n-import '../Models/AttendanceModel.dart';\r\n-import '../Models/LoginModel.dart';\r\n \r\n-final attendanceViewModelProvider =\r\n-    Provider((ref) => AttendanceViewModel(FirebaseFirestore.instance));\r\n+final attendanceProvider =\r\n+    StateNotifierProvider<AttendanceNotifier, AttendanceState>(\r\n+  (ref) => AttendanceNotifier(),\r\n+);\r\n \r\n-class AttendanceScreen extends ConsumerStatefulWidget {\r\n-  const AttendanceScreen({super.key});\r\n+class AttendanceState {\r\n+  final String status;\r\n+  final String? clockInTime;\r\n+  final String? clockOutTime;\r\n \r\n-  @override\r\n-  ConsumerState<AttendanceScreen> createState() => _AttendanceScreenState();\r\n+  AttendanceState({required this.status, this.clockInTime, this.clockOutTime});\r\n+\r\n+  AttendanceState copyWith({\r\n+    String? status,\r\n+    String? clockInTime,\r\n+    String? clockOutTime,\r\n+  }) {\r\n+    return AttendanceState(\r\n+      status: status ?? this.status,\r\n+      clockInTime: clockInTime ?? this.clockInTime,\r\n+      clockOutTime: clockOutTime ?? this.clockOutTime,\r\n+    );\r\n+  }\r\n }\r\n \r\n-class _AttendanceScreenState extends ConsumerState<AttendanceScreen> {\r\n-  String? attendanceStatus;\r\n-\r\n-  @override\r\n-  void initState() {\r\n-    super.initState();\r\n-    _loadAttendanceStatus();\r\n+class AttendanceNotifier extends StateNotifier<AttendanceState> {\r\n+  AttendanceNotifier() : super(AttendanceState(status: \"Clock In\")) {\r\n+    _loadAttendanceData();\r\n   }\r\n \r\n-  Future<void> _loadAttendanceStatus() async {\r\n+  Future<void> _loadAttendanceData() async {\r\n     SharedPreferences prefs = await SharedPreferences.getInstance();\r\n-    setState(() {\r\n-      attendanceStatus = prefs.getString('attendance_status') ?? 'Clock In';\r\n-    });\r\n+    String status = prefs.getString('attendance_status') ?? 'Clock In';\r\n+    String? clockInTime = prefs.getString('clocked_in_time');\r\n+    String? clockOutTime = prefs.getString('clocked_out_time');\r\n+\r\n+    state = AttendanceState(\r\n+      status: status,\r\n+      clockInTime: clockInTime,\r\n+      clockOutTime: clockOutTime,\r\n+    );\r\n   }\r\n \r\n-  Future<void> _toggleAttendance(String userEmail) async {\r\n+  Future<void> toggleAttendance(String userEmail) async {\r\n     SharedPreferences prefs = await SharedPreferences.getInstance();\r\n-    final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n-    String newStatus =\r\n-        attendanceStatus == 'Clock In' ? 'Clock Out' : 'Clock In';\r\n-    await attendanceViewModel.markAttendance(userEmail);\r\n-    await prefs.setString('attendance_status', newStatus);\r\n-    setState(() {\r\n-      attendanceStatus = newStatus;\r\n-    });\r\n-  }\r\n+    String newStatus = (state.status == \"Clock In\") ? \"Clock Out\" : \"Clock In\";\r\n+    String formattedTime = DateFormat('hh:mm a').format(DateTime.now());\r\n \r\n-  @override\r\n-  Widget build(BuildContext context) {\r\n-    final userEmail = ref.watch(userProvider) ?? \"Unknown User\";\r\n-    String formattedDate = DateFormat('EEEE, MMM d').format(DateTime.now());\r\n-    String formattedTime = DateFormat('HH:mm').format(DateTime.now());\r\n+    if (newStatus == \"Clock Out\") {\r\n+      await prefs.setString('clocked_in_time', formattedTime);\r\n+      state = state.copyWith(status: newStatus, clockInTime: formattedTime);\r\n+    } else {\r\n+      await prefs.setString('clocked_out_time', state.clockInTime);\r\n+      state = state.copyWith(status: newStatus, clockOutTime: state.clockInTime);\r\n+    }\r\n \r\n-    return Scaffold(\r\n-      backgroundColor: Colors.white,\r\n-      body: Center(\r\n-        child: Column(\r\n-          mainAxisAlignment: MainAxisAlignment.center,\r\n-          children: [\r\n-            Text(\r\n-              formattedTime,\r\n-              style: GoogleFonts.poppins(\r\n-                fontSize: 40,\r\n-                fontWeight: FontWeight.bold,\r\n-                color: Colors.black,\r\n-              ),\r\n-            ),\r\n-            Text(\r\n-              formattedDate,\r\n-              style: GoogleFonts.poppins(fontSize: 20, color: Colors.grey),\r\n-            ),\r\n-            const SizedBox(height: 40),\r\n-            GestureDetector(\r\n-              onTap: () => _toggleAttendance(userEmail),\r\n-              child: Container(\r\n-                width: 120,\r\n-                height: 120,\r\n-                decoration: BoxDecoration(\r\n-                  shape: BoxShape.circle,\r\n-                  gradient: const LinearGradient(\r\n-                    colors: [Colors.pink, Colors.purple],\r\n-                    begin: Alignment.topLeft,\r\n-                    end: Alignment.bottomRight,\r\n-                  ),\r\n-                  boxShadow: [\r\n-                    BoxShadow(\r\n-                      color: Colors.purple.withOpacity(0.5),\r\n-                      blurRadius: 10,\r\n-                      spreadRadius: 2,\r\n-                    )\r\n-                  ],\r\n-                ),\r\n-                child: Center(\r\n-                  child: Icon(\r\n-                    attendanceStatus == 'Clock In' ? Icons.login : Icons.logout,\r\n-                    size: 50,\r\n-                    color: Colors.white,\r\n-                  ),\r\n-                ),\r\n-              ),\r\n-            ),\r\n-            const SizedBox(height: 20),\r\n-            Text(\r\n-              attendanceStatus!,\r\n-              style: GoogleFonts.poppins(\r\n-                fontSize: 22,\r\n-                fontWeight: FontWeight.bold,\r\n-              ),\r\n-            ),\r\n-          ],\r\n-        ),\r\n-      ),\r\n-    );\r\n+    await prefs.setString('attendance_status', newStatus);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1741804101899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,6 @@\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n import 'package:shared_preferences/shared_preferences.dart';\r\n-import 'package:cloud_firestore/cloud_firestore.dart';\r\n import 'package:intl/intl.dart';\r\n \r\n final attendanceProvider =\r\n     StateNotifierProvider<AttendanceNotifier, AttendanceState>(\r\n@@ -61,4 +60,9 @@\n \r\n     await prefs.setString('attendance_status', newStatus);\r\n   }\r\n }\r\n+final liveTimeProvider = StreamProvider<String>((ref) {\r\n+  return Stream.periodic(const Duration(seconds: 1), (_) {\r\n+    return DateFormat('hh:mm:ss a').format(DateTime.now());\r\n+  });\r\n+});\r\n"
                },
                {
                    "date": 1741804112476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     if (newStatus == \"Clock Out\") {\r\n       await prefs.setString('clocked_in_time', formattedTime);\r\n       state = state.copyWith(status: newStatus, clockInTime: formattedTime);\r\n     } else {\r\n-      await prefs.setString('clocked_out_time', state.clockInTime);\r\n+      await prefs.setString('clocked_out_time', state.clockInTime ?? '');\r\n       state = state.copyWith(status: newStatus, clockOutTime: state.clockInTime);\r\n     }\r\n \r\n     await prefs.setString('attendance_status', newStatus);\r\n"
                },
                {
                    "date": 1741804135697,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,4 +65,106 @@\n   return Stream.periodic(const Duration(seconds: 1), (_) {\r\n     return DateFormat('hh:mm:ss a').format(DateTime.now());\r\n   });\r\n });\r\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n+import 'package:google_fonts/google_fonts.dart';\r\n+import 'package:intl/intl.dart';\r\n+import '../ViewModel/AttendanceViewModel.dart';\r\n+\r\n+class AttendanceScreen extends ConsumerWidget {\r\n+  const AttendanceScreen({super.key});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context, WidgetRef ref) {\r\n+    final attendanceState = ref.watch(attendanceProvider);\r\n+    final liveTime = ref.watch(liveTimeProvider).value ?? '';\r\n+\r\n+    return Scaffold(\r\n+      backgroundColor: Colors.white,\r\n+      body: Stack(\r\n+        children: [\r\n+          Center(\r\n+            child: Column(\r\n+              mainAxisAlignment: MainAxisAlignment.center,\r\n+              children: [\r\n+                Text(\r\n+                  liveTime,\r\n+                  style: GoogleFonts.poppins(\r\n+                    fontSize: 40,\r\n+                    fontWeight: FontWeight.bold,\r\n+                    color: Colors.black,\r\n+                  ),\r\n+                ),\r\n+                Text(\r\n+                  DateFormat('EEEE, MMM d').format(DateTime.now()),\r\n+                  style: GoogleFonts.poppins(fontSize: 20, color: Colors.grey),\r\n+                ),\r\n+                const SizedBox(height: 40),\r\n+                GestureDetector(\r\n+                  onTap: () => ref\r\n+                      .read(attendanceProvider.notifier)\r\n+                      .toggleAttendance(\"user@example.com\"),\r\n+                  child: Container(\r\n+                    width: 120,\r\n+                    height: 120,\r\n+                    decoration: BoxDecoration(\r\n+                      shape: BoxShape.circle,\r\n+                      gradient: const LinearGradient(\r\n+                        colors: [Colors.pink, Colors.purple],\r\n+                        begin: Alignment.topLeft,\r\n+                        end: Alignment.bottomRight,\r\n+                      ),\r\n+                      boxShadow: [\r\n+                        BoxShadow(\r\n+                          color: Colors.purple.withOpacity(0.5),\r\n+                          blurRadius: 10,\r\n+                          spreadRadius: 2,\r\n+                        )\r\n+                      ],\r\n+                    ),\r\n+                    child: Center(\r\n+                      child: Icon(\r\n+                        attendanceState.status == 'Clock In'\r\n+                            ? Icons.login\r\n+                            : Icons.logout,\r\n+                        size: 50,\r\n+                        color: Colors.white,\r\n+                      ),\r\n+                    ),\r\n+                  ),\r\n+                ),\r\n+                const SizedBox(height: 20),\r\n+                Text(\r\n+                  attendanceState.status,\r\n+                  style: GoogleFonts.poppins(\r\n+                    fontSize: 22,\r\n+                    fontWeight: FontWeight.bold,\r\n+                  ),\r\n+                ),\r\n+              ],\r\n+            ),\r\n+          ),\r\n+\r\n+          /// Bottom Left & Right (Clocked In / Out Time)\r\n+          Positioned(\r\n+            left: 20,\r\n+            bottom: 20,\r\n+            child: Text(\r\n+              \"Clock In: ${attendanceState.clockInTime ?? '--:--'}\",\r\n+              style: GoogleFonts.poppins(fontSize: 16, color: Colors.green),\r\n+            ),\r\n+          ),\r\n+          Positioned(\r\n+            right: 20,\r\n+            bottom: 20,\r\n+            child: Text(\r\n+              \"Clock Out: ${attendanceState.clockOutTime ?? '--:--'}\",\r\n+              style: GoogleFonts.poppins(fontSize: 16, color: Colors.red),\r\n+            ),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+    );\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1741804144207,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n import 'package:shared_preferences/shared_preferences.dart';\r\n import 'package:intl/intl.dart';\r\n \r\n@@ -65,14 +66,10 @@\n   return Stream.periodic(const Duration(seconds: 1), (_) {\r\n     return DateFormat('hh:mm:ss a').format(DateTime.now());\r\n   });\r\n });\r\n-import 'package:flutter/material.dart';\r\n-import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n-import 'package:google_fonts/google_fonts.dart';\r\n-import 'package:intl/intl.dart';\r\n-import '../ViewModel/AttendanceViewModel.dart';\r\n \r\n+\r\n class AttendanceScreen extends ConsumerWidget {\r\n   const AttendanceScreen({super.key});\r\n \r\n   @override\r\n"
                },
                {
                    "date": 1741804151336,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,7 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter_riverpod/flutter_riverpod.dart';\r\n+import 'package:google_fonts/google_fonts.dart';\r\n import 'package:shared_preferences/shared_preferences.dart';\r\n import 'package:intl/intl.dart';\r\n \r\n final attendanceProvider =\r\n"
                },
                {
                    "date": 1741804172659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,9 +143,8 @@\n               ],\r\n             ),\r\n           ),\r\n \r\n-          /// Bottom Left & Right (Clocked In / Out Time)\r\n           Positioned(\r\n             left: 20,\r\n             bottom: 20,\r\n             child: Text(\r\n"
                },
                {
                    "date": 1741804178788,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -142,9 +142,9 @@\n                 ),\r\n               ],\r\n             ),\r\n           ),\r\n-\r\n+if()\r\n           Positioned(\r\n             left: 20,\r\n             bottom: 20,\r\n             child: Text(\r\n"
                },
                {
                    "date": 1741804187472,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -142,9 +142,9 @@\n                 ),\r\n               ],\r\n             ),\r\n           ),\r\n-if()\r\n+if(attendanceState.clockInTime != null || attendanceState.clockOutTime != null)\r\n           Positioned(\r\n             left: 20,\r\n             bottom: 20,\r\n             child: Text(\r\n"
                },
                {
                    "date": 1741804197814,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,21 +56,22 @@\n       await prefs.setString('clocked_in_time', formattedTime);\r\n       state = state.copyWith(status: newStatus, clockInTime: formattedTime);\r\n     } else {\r\n       await prefs.setString('clocked_out_time', state.clockInTime ?? '');\r\n-      state = state.copyWith(status: newStatus, clockOutTime: state.clockInTime);\r\n+      state =\r\n+          state.copyWith(status: newStatus, clockOutTime: state.clockInTime);\r\n     }\r\n \r\n     await prefs.setString('attendance_status', newStatus);\r\n   }\r\n }\r\n+\r\n final liveTimeProvider = StreamProvider<String>((ref) {\r\n   return Stream.periodic(const Duration(seconds: 1), (_) {\r\n     return DateFormat('hh:mm:ss a').format(DateTime.now());\r\n   });\r\n });\r\n \r\n-\r\n class AttendanceScreen extends ConsumerWidget {\r\n   const AttendanceScreen({super.key});\r\n \r\n   @override\r\n@@ -142,18 +143,20 @@\n                 ),\r\n               ],\r\n             ),\r\n           ),\r\n-if(attendanceState.clockInTime != null || attendanceState.clockOutTime != null)\r\n+          if (attendanceState.clockInTime != null ||\r\n+              attendanceState.clockOutTime != null)\r\n+            Positioned(\r\n+              left: 20,\r\n+              bottom: 20,\r\n+              child: Text(\r\n+                \"Clock In: ${attendanceState.clockInTime ?? '--:--'}\",\r\n+                style: GoogleFonts.poppins(fontSize: 16, color: Colors.green),\r\n+              ),\r\n+            ), if (attendanceState.clockInTime != null ||\r\n+              attendanceState.clockOutTime != null)\r\n           Positioned(\r\n-            left: 20,\r\n-            bottom: 20,\r\n-            child: Text(\r\n-              \"Clock In: ${attendanceState.clockInTime ?? '--:--'}\",\r\n-              style: GoogleFonts.poppins(fontSize: 16, color: Colors.green),\r\n-            ),\r\n-          ),\r\n-          Positioned(\r\n             right: 20,\r\n             bottom: 20,\r\n             child: Text(\r\n               \"Clock Out: ${attendanceState.clockOutTime ?? '--:--'}\",\r\n"
                },
                {
                    "date": 1741804203601,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -144,9 +144,9 @@\n               ],\r\n             ),\r\n           ),\r\n           if (attendanceState.clockInTime != null ||\r\n-              attendanceState.clockOutTime != null)\r\n+              )\r\n             Positioned(\r\n               left: 20,\r\n               bottom: 20,\r\n               child: Text(\r\n"
                },
                {
                    "date": 1741804251140,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,27 +143,26 @@\n                 ),\r\n               ],\r\n             ),\r\n           ),\r\n+          Positioned(\r\n+            left: 20,\r\n+            bottom: 20,\r\n+            child: Text(\r\n+              \"Clock In: ${attendanceState.clockInTime ?? '--:--'}\",\r\n+              style: GoogleFonts.poppins(fontSize: 16, color: Colors.green),\r\n+            ),\r\n+          ),\r\n           if (attendanceState.clockInTime != null ||\r\n-              )\r\n+              attendanceState.clockOutTime != null)\r\n             Positioned(\r\n-              left: 20,\r\n+              right: 20,\r\n               bottom: 20,\r\n               child: Text(\r\n-                \"Clock In: ${attendanceState.clockInTime ?? '--:--'}\",\r\n-                style: GoogleFonts.poppins(fontSize: 16, color: Colors.green),\r\n+                \"Clock Out: ${attendanceState.clockOutTime ?? '--:--'}\",\r\n+                style: GoogleFonts.poppins(fontSize: 16, color: Colors.red),\r\n               ),\r\n-            ), if (attendanceState.clockInTime != null ||\r\n-              attendanceState.clockOutTime != null)\r\n-          Positioned(\r\n-            right: 20,\r\n-            bottom: 20,\r\n-            child: Text(\r\n-              \"Clock Out: ${attendanceState.clockOutTime ?? '--:--'}\",\r\n-              style: GoogleFonts.poppins(fontSize: 16, color: Colors.red),\r\n             ),\r\n-          ),\r\n         ],\r\n       ),\r\n     );\r\n   }\r\n"
                },
                {
                    "date": 1741804258191,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,16 +143,17 @@\n                 ),\r\n               ],\r\n             ),\r\n           ),\r\n-          Positioned(\r\n-            left: 20,\r\n-            bottom: 20,\r\n-            child: Text(\r\n-              \"Clock In: ${attendanceState.clockInTime ?? '--:--'}\",\r\n-              style: GoogleFonts.poppins(fontSize: 16, color: Colors.green),\r\n+          if (attendanceState.clockInTime != null)\r\n+            Positioned(\r\n+              left: 20,\r\n+              bottom: 20,\r\n+              child: Text(\r\n+                \"Clock In: ${attendanceState.clockInTime ?? '--:--'}\",\r\n+                style: GoogleFonts.poppins(fontSize: 16, color: Colors.green),\r\n+              ),\r\n             ),\r\n-          ),\r\n           if (attendanceState.clockInTime != null ||\r\n               attendanceState.clockOutTime != null)\r\n             Positioned(\r\n               right: 20,\r\n"
                },
                {
                    "date": 1741804310103,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,9 @@\n     SharedPreferences prefs = await SharedPreferences.getInstance();\r\n     String newStatus = (state.status == \"Clock In\") ? \"Clock Out\" : \"Clock In\";\r\n     String formattedTime = DateFormat('hh:mm a').format(DateTime.now());\r\n \r\n-    if (newStatus == \"Clock Out\" ) {\r\n+    if (newStatus == \"Clock Out\" ||) {\r\n       await prefs.setString('clocked_in_time', formattedTime);\r\n       state = state.copyWith(status: newStatus, clockInTime: formattedTime);\r\n     } else {\r\n       await prefs.setString('clocked_out_time', state.clockInTime ?? '');\r\n"
                },
                {
                    "date": 1741804834869,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -173,9 +173,9 @@\n             Positioned(\r\n               right: 20,\r\n               bottom: 20,\r\n               child: Text(\r\n-                \"Clock Out: ${attendanceState.clockOutTime ?? '--:--'}\",\r\n+                \"Mark Out: ${attendanceState.clockOutTime ?? '--:--'}\",\r\n                 style: GoogleFonts.poppins(fontSize: 16, color: Colors.red),\r\n               ),\r\n             ),\r\n         ],\r\n"
                }
            ],
            "date": 1741784886623,
            "name": "Commit-0",
            "content": "class AttendanceScreen extends ConsumerWidget {\r\n  @override\r\n  Widget build(BuildContext context, WidgetRef ref) {\r\n    final userEmail = ref.watch(userProvider)?.email ?? \"Unknown User\";\r\n    final attendanceViewModel = ref.read(attendanceViewModelProvider);\r\n    String currentDate = DateTime.now().toLocal().toString().split(' ')[0];\r\n\r\n    return Scaffold(\r\n      appBar: AppBar(title: Text(\"Attendance\")),\r\n      body: Center(\r\n        child: Column(\r\n          mainAxisAlignment: MainAxisAlignment.center,\r\n          children: [\r\n            Text(\"Date: $currentDate\", style: TextStyle(fontSize: 20)),\r\n            SizedBox(height: 20),\r\n            ElevatedButton(\r\n              onPressed: () async {\r\n                await attendanceViewModel.markAttendance(userEmail);\r\n                ScaffoldMessenger.of(context).showSnackBar(\r\n                  SnackBar(content: Text(\"Attendance Marked!\")),\r\n                );\r\n              },\r\n              child: Text(\"Mark Attendance\"),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n"
        }
    ]
}